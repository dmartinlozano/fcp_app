//aux files for several fixes

ext.readPubspecProperties = { ->
    println("> Starting task to get properties from pubspec...")
    def pubspecYaml = new File(project.rootDir, '../pubspec.yaml')
    def versionNameMatch = pubspecYaml.text =~ /version: (.+)/
    if (versionNameMatch) {
        def versionNameString = versionNameMatch[0][1]
        def versionNameParts = versionNameString.split("\\+")
        if (versionNameParts.length == 2) {
            project.ext.set("flutterVersionName", versionNameParts[0])
            project.ext.set("flutterVersionCode", versionNameParts[1].toInteger())
        }
    }
}